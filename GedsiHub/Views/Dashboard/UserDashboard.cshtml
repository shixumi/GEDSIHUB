@model GedsiHub.ViewModels.UserDashboardViewModel

@{
    Layout = "_LayoutApp";
    ViewData["Title"] = "User Dashboard";

    // Calculate the start day of the current week based on CurrentStreak
    // For example, if CurrentStreak = 9, startDay = 8
    int startDay = ((Model.CurrentStreak - 1) / 7) * 7 + 1;
    int endDay = startDay + 6;
}

<div>
    <!-- Dashboard Header -->
    <div class="feedback-title-searcbar-con">
        <h1 id="feedback-responses-title" class="modules_title" style="color: #464040;">Dashboard</h1>
        <div></div>
    </div>
    <div style="height: 1px; background: rgb(183, 186, 199); border-color: #9C9C9C;"></div>

    <!-- Dashboard Content -->
    <div class="dashboard-con-of-con">
        <!-- Modules To Do and Completed Modules -->
        <div id="to-do-and-completed" class="dashboard-container">
            <!-- Modules To Do -->
            <div id="modulesToDoContainer" class="container dashboard-item-container">
                <div class="dashboard-img-con">
                    <img src="~/images/Modules_To_Do.png" alt="Modules To Do" />
                </div>
                <div class="no-of-mod-to-do-con">
                    <h1 class="no-of-mod">@Model.TotalModules - @Model.CompletedModules</h1>
                    <span class="mod-text-dashboard">MODULES TO DO</span>
                </div>
            </div>

            <!-- Completed Modules -->
            <div id="completedModulesCon" class="container dashboard-item-container">
                <div class="dashboard-img-con">
                    <img src="~/images/Completed_Modules.png" alt="Completed Modules" />
                </div>
                <div class="no-of-comp-mod-con">
                    <h1 class="no-of-mod">@Model.CompletedModules</h1>
                    <span class="mod-text-dashboard">COMPLETED MODULES</span>
                </div>
            </div>
        </div>

        <!-- Streak and Days -->
        <div id="your-streak-and-days" class="dashboard-container">
            <!-- Your Streak -->
            <div id="yourStreakCon" class="container dashboard-item-container">
                <h1 class="your-streak-label">Your Streak</h1>
                <div class="streak">
                    <div class="streak-week">
                        @for (int day = startDay; day <= endDay; day++)
                        {
                            <div class="streak-item">
                                <div class="streak-circle @(day <= Model.CurrentStreak ? "filled" : "")">
                                    <svg class="bolt-icon" xmlns="http://www.w3.org/2000/svg" width="1em" height="1em" viewBox="0 0 24 24" fill="none">
                                        <path d="M9 21.5L17.5 13L13 10L15 2.5L6.5 11L11 14L9 21.5Z" fill="currentColor"></path>
                                    </svg>
                                </div>
                                <span class="days-label-your-streak">@day</span>
                            </div>
                        }
                    </div>
                </div>
            </div>

            <!-- Streak Days -->
            <div id="streakDaysCon" class="container dashboard-item-container">
                <h1 class="days-of-streak">@Model.CurrentStreak</h1>
                <span class="days-streak-text">days streak!</span>
            </div>
        </div>
    </div>
</div>
