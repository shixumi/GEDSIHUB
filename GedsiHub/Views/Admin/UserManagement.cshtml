@model GedsiHub.ViewModels.UserManagementViewModel

@{
    Layout = "_LayoutApp";
    ViewData["Title"] = "User Management";
}


<div>
    <!-- Search and Filter Form -->
<form asp-action="UserManagement" method="get" class="mb-3">
    <div class="um-title-searcbar-con">
        <h1 id="feedback-responses-title" class="modules_title" style="color: #464040;">User Management</h1>
        
        
        <div class="um-search-con">
            <input id="userManagementSearch" type="search" name="search" value="@Model.SearchTerm" placeholder="Search by username or email" />
                <button type="submit" class="search-icon-um">
                    <img id="userManagementSearchButton" src="~/images/Search_Small.png" width="20" height="29" alt="Search" />
                </button>
        </div>
    </div>

        <hr class="custom-hr">
        <div class="container feedback-container">
        <div class="user-management-filter-con">
           

            <!-- Back Button -->
            <a asp-action="Index" asp-controller="Dashboard" id="umBackButton">
                <img src="~/images/Back.png" alt="Back to Dashboard" /> Back to Dashboard
            </a>



           <div class="select-container">
            <select id="isActiveSelect" name="isActive" class="form-control">
                @if (Model.IsActive == null)
                {
                    <option value="" selected>All Users</option>
                    <option value="true">Active Users</option>
                    <option value="false">Inactive Users</option>
                }
                else if (Model.IsActive == true)
                {
                    <option value="">All Users</option>
                    <option value="true" selected>Active Users</option>
                    <option value="false">Inactive Users</option>
                }
                else if (Model.IsActive == false)
                {
                    <option value="">All Users</option>
                    <option value="true">Active Users</option>
                    <option value="false" selected>Inactive Users</option>
                }
            </select>
            <img src="~/images/Filter.png" width="1.7rem" height="1.7rem" alt="Filter Icon" class="filter-icon" />
        </div>




        </div>




        <div>

         <!-- Users Table -->
            @if (Model.Users != null && Model.Users.Any())
            {
                <form asp-action="BulkDeleteUsers" method="post">
                        <table class="table">
                            <thead>
                                <tr class="feedback-table-label">
                                    <th class="um-header-label">Select</th>
                                    <th class="um-header-label">Username</th>
                                    <th class="um-header-label">Email</th>
                                    <th class="um-header-label">Admin</th>
                                    <th class="um-header-label">Status</th>
                                    <th class="um-header-label"><span>Actions</span></th>
                                </tr>
                            </thead>
                            <tbody>
                                @foreach (var user in Model.Users)
                            {
                                <tr class="row-feedback-response">
                                                <td class="um-content"><input type="checkbox" name="UserIds" value="@user.Id" /></td>
                                                <td class="um-content">@user.UserName</td>
                                                <td class="um-content">@user.Email</td>
                                    <td class="um-content">@(user.IsAdmin ? "Yes" : "No")</td>
                                                <td class="um-content">@(user.IsActive ? "Active" : "Inactive")</td>
                                    <td id="um-content-button-con" class="um-content">
                                                    <a asp-action="EditUser" asp-route-id="@user.Id" id="um-edit-user-button">
                                                        <img src="~/images/Edit_Green.png" />Edit
                                                    </a>

                                                    <a asp-action="DeleteUser" asp-route-id="@user.Id" id="um-delete-user-button">
                                                        <img src="~/images/Delete.png" />Delete
                                                    </a>
                                    </td>
                                </tr>
                            }
                    </tbody>
                </table>
                </form>
            }
            else
            {
                <p>No users found.</p>
            }

        </div>
        <div id="um-actions-con-bottom">
            <img id="deleteSelectedUM" src="~/images/Delete.png" />
        </div>
    </div>
    </form>
</div>